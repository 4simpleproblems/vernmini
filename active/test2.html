<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>VERN MINI - HOME</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>V</text></svg>">
    <style>
        /* --- CSS Reset and Basic Setup --- */
        :root {
            --bg-color: #1e1e20;
            --text-color: #E0E1DD;
            --accent-color: #7F5AF0;
            --input-bg-color: #303438;
            --input-border-color: #40454a;
            --placeholder-color: rgba(224, 225, 221, 0.5);
            --focus-shadow-color: rgba(127, 90, 240, 0.3);
            --font-family-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --radius-main: 12px;
        }
        *, *::before, *::after {
            box-sizing: border-box;
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-family-main);
            display: flex;
            align-items: center; /* Vertical centering */
            justify-content: center; /* Horizontal centering */
            text-align: center;
        }

        /* --- Main Content Container --- */
        #content-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 850px;
            padding: 20px;
        }

        /* --- Logo (Optimized with SVG) --- */
        #logo {
            width: 200px;
            height: auto;
            margin-bottom: 35px;
        }

        /* --- Search Bar --- */
        #search-container {
            width: 100%;
            position: relative;
        }
        /* Search Icon using a pseudo-element for performance */
        #search-container::before {
            content: "üîç";
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
            color: var(--placeholder-color);
            pointer-events: none;
        }
        #search-input {
            width: 100%;
            padding: 14px 22px 14px 48px; /* Left padding for the icon */
            font-size: 1rem;
            border-radius: var(--radius-main);
            border: 2px solid var(--input-border-color);
            background-color: var(--input-bg-color);
            color: var(--text-color);
            font-family: var(--font-family-main);
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        #search-input::placeholder {
            color: var(--placeholder-color);
        }
        #search-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px var(--focus-shadow-color);
        }

        /* --- Responsive Design for smaller screens --- */
        @media (max-width: 767px) {
            #logo {
                width: 160px;
                margin-bottom: 30px;
            }
            #search-input {
                padding: 12px 18px 12px 42px;
                font-size: 0.9rem;
            }
             #search-container::before {
                left: 15px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <main id="content-container">
        <svg id="logo" viewBox="0 0 400 100" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color:rgb(127,90,240);stop-opacity:1" />
              <stop offset="100%" style="stop-color:rgb(172,148,252);stop-opacity:1" />
            </linearGradient>
          </defs>
          <text font-family="var(--font-family-main)" font-size="70" font-weight="bold" y="70" x="50%" text-anchor="middle" fill="url(#grad1)">VERN MAX</text>
        </svg>

        <div id="search-container">
            <input id="search-input" type="text" placeholder="Search the web or type a URL" />
        </div>
    </main>

    <script src="uv/uv.bundle.js" defer></script>
    <script src="uv/uv.config.js" defer></script>
    
    <script>
        "use strict";
        (function() {
            // --- DOM Element Selection ---
            const searchInput = document.getElementById('search-input');
            
            // The JavaScript you provided uses element IDs like 'uv-form' and 'uv-address'.
            // In this optimized version, we only need the single 'search-input' element.
            
            /**
             * The main function to handle the search submission.
             * It registers the service worker and redirects to the proxy.
             */
            async function handleSearch() {
                const query = searchInput.value.trim();
                if (!query) return;

                try {
                    // The 'registerSW' function is provided by 'uv.config.js'
                    // It's essential for the proxy to work.
                    await registerSW();

                    // The 'search' function (also from uv.config.js) processes the query.
                    // The second argument is the search engine, which can be hardcoded or configured.
                    const targetUrl = search(query, 'https://duckduckgo.com/q=%s');
                    
                    // We use the proxy's built-in encoding for the URL.
                    const encodedUrl = __uv$config.prefix + __uv$config.encodeUrl(targetUrl);
                    
                    // Redirect to the now proxied URL.
                    location.href = encodedUrl;

                } catch (err) {
                    console.error("Search failed:", err);
                    searchInput.placeholder = "Error: Proxy registration failed.";
                }
            }

            // --- Event Listener ---
            if (searchInput) {
                searchInput.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter') {
                        event.preventDefault(); // Prevent default form submission
                        handleSearch();
                    }
                });
            }
        })();
    </script>
</body>
</html>
